{"version":3,"file":"css-proxy.min.js","sources":["../src/index.js","../node_modules/decamelize/index.js","../node_modules/rgb-hex/index.js"],"sourcesContent":["import decamelize from 'decamelize';\nimport rgbHex from 'rgb-hex';\n\n//all properties are available\n//using getComputedStyle(element)\n//document.documentElement gets :root pseudo stuff\nexport default function cssProxy(\n    element = document.documentElement,\n    props = {},\n    pseudo\n){\n    if(typeof props !== 'object'){\n        props = {};\n    }\n\n    let allstyles = getComputedStyle(element, pseudo);\n\n    function getName(name){\n        //Computed styles contain all the properties.\n        if(allstyles[name] === void 0){\n            //supporting camelcase properties\n            return '--'+decamelize(name, '-');\n        }\n        return decamelize(name, '-');\n    }\n\n    const css = Object.assign(Object.create(null), {\n        setProperty(name, value, priority){\n            element.style.setProperty(name, value, priority);\n        },\n        getProperty(name){\n            return allstyles.getPropertyValue(name);\n        },\n        cssGet(name){\n            if(nameOnElement(element, name)){\n                return element.style[name];\n            }\n            let v = this.getProperty(getName(name));\n            return !v || !v.length ? undefined : v.trim();\n        },\n        cssSet(name, value, priority){\n            this.setProperty(getName(name), convertValue(value), priority);\n        },\n        remove(name){\n            element.style.removeProperty(name);\n        },\n        [Symbol.toPrimitive](hint){\n            return '[object CSSProxy]';\n        },\n        setAll(...propObjects){\n            propObjects.forEach(props=>{\n                Object.keys(props).forEach(key=>{\n                    this.cssSet(key, props[key]);\n                });\n            });\n            return this;\n        }\n    });\n\n    const proxy = new Proxy(css, {\n        get(target, name){\n            //Return methods\n            if(typeof target[name] === 'function')\n                return target[name].bind(target);\n            //Return properties\n            return target.cssGet(name);\n        },\n        set(target, name, value){\n            target.cssSet(name, value);\n        }\n    });\n\n    Object.keys(props).forEach(key=>{\n        proxy[key] = props[key];\n    });\n\n    return proxy;\n}\n\nfunction nameOnElement(e, name){\n    return !/[-]{2}/.test(name) && e.style[name] !== undefined;\n}\n\n/*\nSetting variables, from variables works different.\ndocument.documentElement.style.setProperty(\"--my-bg-colour\", \"var(--my-fg-colour)\");*/\nfunction convertValue(value){\n    if(/[-]{2}/.test(value + '')){\n        return `var(--${decamelize(value + '')})`;\n    }else {\n        return value;\n    }\n}\n","'use strict';\nmodule.exports = function (str, sep) {\n\tif (typeof str !== 'string') {\n\t\tthrow new TypeError('Expected a string');\n\t}\n\n\tsep = typeof sep === 'undefined' ? '_' : sep;\n\n\treturn str\n\t\t.replace(/([a-z\\d])([A-Z])/g, '$1' + sep + '$2')\n\t\t.replace(/([A-Z]+)([A-Z][a-z\\d]+)/g, '$1' + sep + '$2')\n\t\t.toLowerCase();\n};\n","'use strict';\n/* eslint-disable no-mixed-operators */\nmodule.exports = (red, green, blue, alpha) => {\n\tconst isPercent = (red + (alpha || '')).toString().includes('%');\n\n\tif (typeof red === 'string') {\n\t\tconst res = red.match(/(0?\\.?\\d{1,3})%?\\b/g).map(Number);\n\t\t// TODO: use destructuring when targeting Node.js 6\n\t\tred = res[0];\n\t\tgreen = res[1];\n\t\tblue = res[2];\n\t\talpha = res[3];\n\t} else if (alpha !== undefined) {\n\t\talpha = parseFloat(alpha);\n\t}\n\n\tif (typeof red !== 'number' ||\n\t\ttypeof green !== 'number' ||\n\t\ttypeof blue !== 'number' ||\n\t\tred > 255 ||\n\t\tgreen > 255 ||\n\t\tblue > 255) {\n\t\tthrow new TypeError('Expected three numbers below 256');\n\t}\n\n\tif (typeof alpha === 'number') {\n\t\tif (!isPercent && alpha >= 0 && alpha <= 1) {\n\t\t\talpha = Math.round(255 * alpha);\n\t\t} else if (isPercent && alpha >= 0 && alpha <= 100) {\n\t\t\talpha = Math.round(255 * alpha / 100);\n\t\t} else {\n\t\t\tthrow new TypeError(`Expected alpha value (${alpha}) as a fraction or percentage`);\n\t\t}\n\t\talpha = (alpha | 1 << 8).toString(16).slice(1);\n\t} else {\n\t\talpha = '';\n\t}\n\n\treturn ((blue | green << 8 | red << 16) | 1 << 24).toString(16).slice(1) + alpha;\n};\n"],"names":["nameOnElement","e","name","test","undefined","style","convertValue","value","decamelize","str","sep","TypeError","replace","toLowerCase","module","red","green","blue","alpha","const","isPercent","toString","includes","res","match","map","Number","parseFloat","Math","round","slice","element","props","pseudo","getName","allstyles","document","documentElement","let","getComputedStyle","css","Object","assign","create","setProperty","priority","getProperty","getPropertyValue","cssGet","v","this","length","trim","cssSet","remove","removeProperty","setAll","propObjects","forEach","keys","key","Symbol","toPrimitive","hint","proxy","Proxy","get","target","bind","set"],"mappings":"qCA+EA,SAASA,EAAcC,EAAGC,GACtB,OAAQ,SAASC,KAAKD,SAA2BE,IAAlBH,EAAEI,MAAMH,GAM3C,SAASI,EAAaC,GAClB,MAAG,SAASJ,KAAKI,EAAQ,IACd,SAASC,EAAWD,EAAQ,QAE5BA,ECzFf,MAAiB,SAAUE,EAAKC,GAC/B,GAAmB,iBAARD,EACV,MAAM,IAAIE,UAAU,qBAKrB,OAFAD,OAAqB,IAARA,EAAsB,IAAMA,EAElCD,EACLG,QAAQ,oBAAqB,KAAOF,EAAM,MAC1CE,QAAQ,2BAA4B,KAAOF,EAAM,MACjDG,mFCTHC,UAAiB,SAACC,EAAKC,EAAOC,EAAMC,GACnCC,IAAMC,GAAaL,GAAOG,GAAS,KAAKG,WAAWC,SAAS,KAE5D,GAAmB,iBAARP,EAAkB,CAC5BI,IAAMI,EAAMR,EAAIS,MAAM,uBAAuBC,IAAIC,QAEjDX,EAAMQ,EAAI,GACVP,EAAQO,EAAI,GACZN,EAAOM,EAAI,GACXL,EAAQK,EAAI,aACQnB,IAAVc,IACVA,EAAQS,WAAWT,IAGpB,GAAmB,iBAARH,GACO,iBAAVC,GACS,iBAATC,GACPF,EAAM,KACNC,EAAQ,KACRC,EAAO,IACP,MAAM,IAAIN,UAAU,oCAGrB,GAAqB,iBAAVO,EAAoB,CAC9B,IAAKE,GAAaF,GAAS,GAAKA,GAAS,EACxCA,EAAQU,KAAKC,MAAM,IAAMX,OACnB,CAAA,KAAIE,GAAaF,GAAS,GAAKA,GAAS,KAG9C,MAAM,IAAIP,UAAU,yBAAyBO,mCAF7CA,EAAQU,KAAKC,MAAM,IAAMX,EAAQ,KAIlCA,GAAiB,IAARA,GAAgBG,SAAS,IAAIS,MAAM,QAE5CZ,EAAQ,GAGT,OAASD,EAAOD,GAAS,EAAID,GAAO,GAAM,GAAK,IAAIM,SAAS,IAAIS,MAAM,GAAKZ,YFhC5E,SACIa,EACAC,EACAC,GAQA,SAASC,EAAQhC,GAEb,YAAuB,IAApBiC,EAAUjC,GAEF,KAAKM,EAAWN,EAAM,KAE1BM,EAAWN,EAAM,oBAhBlBkC,SAASC,oCAIC,iBAAVL,IACNA,MAGJM,MAAIH,EAAYI,iBAAiBR,EAASE,GAWpCO,EAAMC,OAAOC,OAAOD,OAAOE,OAAO,UACpCC,qBAAY1C,EAAMK,EAAOsC,GACrBd,EAAQ1B,MAAMuC,YAAY1C,EAAMK,EAAOsC,IAE3CC,qBAAY5C,GACR,OAAOiC,EAAUY,iBAAiB7C,IAEtC8C,gBAAO9C,GACH,GAAGF,EAAc+B,EAAS7B,GACtB,OAAO6B,EAAQ1B,MAAMH,GAEzBoC,IAAIW,EAAIC,KAAKJ,YAAYZ,EAAQhC,IACjC,OAAQ+C,GAAMA,EAAEE,OAAqBF,EAAEG,YAAdhD,GAE7BiD,gBAAOnD,EAAMK,EAAOsC,GAChBK,KAAKN,YAAYV,EAAQhC,GAAOI,EAAaC,GAAQsC,IAEzDS,gBAAOpD,GACH6B,EAAQ1B,MAAMkD,eAAerD,IAKjCsD,gFAMI,OALAC,EAAYC,QAAQ,SAAA1B,GAChBS,OAAOkB,KAAK3B,GAAO0B,QAAQ,SAAAE,GACvBV,EAAKG,OAAOO,EAAK5B,EAAM4B,QAGxBV,SATVW,OAAOC,aAAY,SAACC,GACjB,MAAO,yBAYTC,EAAQ,IAAIC,MAAMzB,GACpB0B,aAAIC,EAAQjE,GAER,MAA2B,mBAAjBiE,EAAOjE,GACNiE,EAAOjE,GAAMkE,KAAKD,GAEtBA,EAAOnB,OAAO9C,IAEzBmE,aAAIF,EAAQjE,EAAMK,GACd4D,EAAOd,OAAOnD,EAAMK,MAQ5B,OAJAkC,OAAOkB,KAAK3B,GAAO0B,QAAQ,SAAAE,GACvBI,EAAMJ,GAAO5B,EAAM4B,KAGhBI"}