{"version":3,"file":"css-proxy.js","sources":["../node_modules/decamelize/index.js","../node_modules/rgb-hex/index.js","../src/index.js"],"sourcesContent":["'use strict';\nmodule.exports = function (str, sep) {\n\tif (typeof str !== 'string') {\n\t\tthrow new TypeError('Expected a string');\n\t}\n\n\tsep = typeof sep === 'undefined' ? '_' : sep;\n\n\treturn str\n\t\t.replace(/([a-z\\d])([A-Z])/g, '$1' + sep + '$2')\n\t\t.replace(/([A-Z]+)([A-Z][a-z\\d]+)/g, '$1' + sep + '$2')\n\t\t.toLowerCase();\n};\n","'use strict';\n/* eslint-disable no-mixed-operators */\nmodule.exports = (red, green, blue, alpha) => {\n\tconst isPercent = (red + (alpha || '')).toString().includes('%');\n\n\tif (typeof red === 'string') {\n\t\tconst res = red.match(/(0?\\.?\\d{1,3})%?\\b/g).map(Number);\n\t\t// TODO: use destructuring when targeting Node.js 6\n\t\tred = res[0];\n\t\tgreen = res[1];\n\t\tblue = res[2];\n\t\talpha = res[3];\n\t} else if (alpha !== undefined) {\n\t\talpha = parseFloat(alpha);\n\t}\n\n\tif (typeof red !== 'number' ||\n\t\ttypeof green !== 'number' ||\n\t\ttypeof blue !== 'number' ||\n\t\tred > 255 ||\n\t\tgreen > 255 ||\n\t\tblue > 255) {\n\t\tthrow new TypeError('Expected three numbers below 256');\n\t}\n\n\tif (typeof alpha === 'number') {\n\t\tif (!isPercent && alpha >= 0 && alpha <= 1) {\n\t\t\talpha = Math.round(255 * alpha);\n\t\t} else if (isPercent && alpha >= 0 && alpha <= 100) {\n\t\t\talpha = Math.round(255 * alpha / 100);\n\t\t} else {\n\t\t\tthrow new TypeError(`Expected alpha value (${alpha}) as a fraction or percentage`);\n\t\t}\n\t\talpha = (alpha | 1 << 8).toString(16).slice(1);\n\t} else {\n\t\talpha = '';\n\t}\n\n\treturn ((blue | green << 8 | red << 16) | 1 << 24).toString(16).slice(1) + alpha;\n};\n","import decamelize from 'decamelize';\nimport rgbHex from 'rgb-hex';\n\n//all properties are available\n//using getComputedStyle(element)\n//document.documentElement gets :root pseudo stuff\nexport default function cssProxy(\n    element = document.documentElement,\n    props = {},\n    pseudo\n){\n    if(typeof props !== 'object'){\n        props = {};\n    }\n\n    let allstyles = getComputedStyle(element, pseudo);\n\n    function getName(name){\n        //Computed styles contain all the properties.\n        if(allstyles[name] === void 0){\n            //supporting camelcase properties\n            return '--'+decamelize(name, '-');\n        }\n        return decamelize(name, '-');\n    }\n\n    const css = Object.assign(Object.create(null), {\n        setProperty(name, value, priority){\n            element.style.setProperty(name, value, priority);\n        },\n        getProperty(name){\n            return allstyles.getPropertyValue(name);\n        },\n        cssGet(name){\n            if(nameOnElement(element, name)){\n                return element.style[name];\n            }\n            let v = this.getProperty(getName(name));\n            return !v || !v.length ? undefined : v.trim();\n        },\n        cssSet(name, value, priority){\n            this.setProperty(getName(name), convertValue(value), priority);\n        },\n        remove(name){\n            element.style.removeProperty(name);\n        },\n        [Symbol.toPrimitive](hint){\n            return '[object CSSProxy]';\n        },\n        setAll(...propObjects){\n            propObjects.forEach(props=>{\n                Object.keys(props).forEach(key=>{\n                    this.cssSet(key, props[key]);\n                });\n            });\n            return this;\n        }\n    });\n\n    const proxy = new Proxy(css, {\n        get(target, name){\n            //Return methods\n            if(typeof target[name] === 'function')\n                return target[name].bind(target);\n            //Return properties\n            return target.cssGet(name);\n        },\n        set(target, name, value){\n            target.cssSet(name, value);\n            return true;\n        }\n    });\n\n    Object.keys(props).forEach(key=>{\n        proxy[key] = props[key];\n    });\n\n    return proxy;\n}\n\nfunction nameOnElement(e, name){\n    return !/[-]{2}/.test(name) && e.style[name] !== undefined;\n}\n\n/*\nSetting variables, from variables works different.\ndocument.documentElement.style.setProperty(\"--my-bg-colour\", \"var(--my-fg-colour)\");*/\nfunction convertValue(value){\n    if(/[-]{2}/.test(value + '')){\n        return `var(--${decamelize(value + '')})`;\n    }else {\n        return value;\n    }\n}\n"],"names":["const","let","this"],"mappings":"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"}